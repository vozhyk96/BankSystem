@model IEnumerable<BankSystem.Models.DbModels.BankAccount>
@using Microsoft.AspNet.Identity

<table class="table">
    <tr>
        <th>
            @Html.DisplayName("Номер счёта")
        </th>
        <th>
            @Html.DisplayName("Сумма")
        </th>
        <th>
            @Html.DisplayName("Процент")
        </th>
        
        <th>
            @Html.DisplayName("Последее изменение")
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.id)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.money)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.percent)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastChanging)
        </td>
        <td>
            @if ((Repository.FindUserById(User.Identity.GetUserId()).isAdmin) && (User.Identity.GetUserId() != item.UserId))
            {
                @Html.ActionLink("Поменять процент", "ChangePercent", new { id = item.id, UserId = item.UserId }) 
            }
            |
            @if ((item.isNone) && (item.money == 0))
            {
                @Html.ActionLink("Удалить счёт", "RemoveBAcc", new { UserId = item.UserId, id = item.id })
            }
        </td>
    </tr>
}

</table>
